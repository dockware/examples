{% set page = hook.page %}
{# @var page \Shopware\Storefront\Page\Product\ProductPage #}


{% set criteria = {
    'filter': [
        { 'field': 'product.id', 'type': 'equals', 'value': page.product.id }
    ]
} %}

{% set reviews = services.repository.search('product_review', criteria) %}


{% set reviewData = {
    'count': reviews.count
} %}

{% do page.addArrayExtension('dockwareProductReviews', reviewData) %}

{% do debug.dump(page) %}
{% do debug.dump(reviews) %}